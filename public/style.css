@import url("https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;700&display=swap");

:root {
  /* Couleur par défaut (Solo) */
  --user-color: #86efac; 
}

body {
  font-family: "Outfit", sans-serif;
  background-image: url("https://wallpaper.forfun.com/fetch/fd/fd3123134263ae5fa21b1482552e2715.jpeg");
  background-position: center;
  background-size: cover;
  background-repeat: no-repeat;
  overscroll-behavior: none;
}

.screen { display: none; }
.screen.active { display: flex; }

/* Grille */
.sudoku-grid {
  display: grid;
  grid-template-columns: repeat(9, 1fr);
  gap: 1px;
  background-color: #94a3b8;
  border: 2px solid #65a30d;
  box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
}

.cell {
  background-color: white;
  aspect-ratio: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.5rem;
  cursor: pointer;
  user-select: none;
  position: relative;
  transition: background-color 0.1s ease;
}

.cell:nth-child(3n) { border-right: 2px solid #65a30d; }
.cell:nth-child(9n) { border-right: none; }
.cell:nth-child(n + 19):nth-child(-n + 27),
.cell:nth-child(n + 46):nth-child(-n + 54) { border-bottom: 2px solid #65a30d; }

/* États */
.cell.initial { font-weight: 700; color: #0f172a; }
.cell.user-input { color: #16a34a; font-weight: 600; }

/* Sélection dynamique selon le joueur */
.cell.selected { 
  background-color: var(--user-color) !important; 
}

/* 3x3 Block Highlight */
.cell.highlighted-box {
  background-color: #f0fdf4; /* Vert très clair par défaut */
}

.cell.highlighted { background-color: #f0fdf4; }
.cell.same-number { background-color: #bbf7d0; }
.cell.error { color: #991b1b !important; background-color: #fecaca !important; }

/* Territory Mode */
.cell.owned { color: white !important; font-weight: bold; text-shadow: 0 1px 2px rgba(0,0,0,0.3); }

/* Animations */
@keyframes popIn {
  0% { transform: scale(0.8); opacity: 0; }
  100% { transform: scale(1); opacity: 1; }
}
.animate-pop { animation: popIn 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275); }

@keyframes shake {
  0%, 100% { transform: translateX(0); }
  25% { transform: translateX(-5px); }
  75% { transform: translateX(5px); }
}
.animate-shake {
  animation: shake 0.3s ease-in-out;
  background-color: #fee2e2 !important; /* Flash rouge */
}

/* Notes */
.note-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    width: 100%;
    height: 100%;
    pointer-events: none;
}
.note-num {
    font-size: 0.5rem;
    color: #64748b;
    display: flex;
    align-items: center;
    justify-content: center;
}

@media (max-width: 640px) {
  .cell { font-size: 1.2rem; }
  .note-num { font-size: 0.4rem; }
}